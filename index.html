<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Options Pro v2 - Ultimate Terminal</title>
    
    <!-- FAVICON -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='85' font-size='90' font-weight='bold' fill='%23FFD700'>üìä</text></svg>">
    
    <!-- CSS –°–¢–ò–õ–ò -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components/modal.css">
    <link rel="stylesheet" href="css/components/cards.css">
    <link rel="stylesheet" href="css/components/table.css">
    <link rel="stylesheet" href="css/pages/terminal.css">
    
    <style>
        /* –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ CSS */
        body { 
            background: #050505; 
            color: #fff; 
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        #loading { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh;
        }
    </style>
</head>
<body>

<!-- LOADING INDICATOR -->
<div id="loading" style="flex-direction: column; gap: 20px;">
    <div style="font-size: 3rem;">‚öôÔ∏è</div>
    <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</div>
</div>

<!-- MAIN APP -->
<div id="app" style="display: none;"></div>

<!-- ============================================ -->
<!-- FIREBASE & EXTERNAL LIBRARIES (FIRST!) -->
<!-- ============================================ -->

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>

<!-- External Libraries -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>

<!-- Firebase Config (GENERATED) -->
<script src="firebase-config.js"></script>

<!-- ============================================ -->
<!-- OUR MODULES (AFTER EXTERNAL) -->
<!-- ============================================ -->

<!-- Core modules -->
<script src="js/constants.js"></script>
<script src="js/cache.js"></script>
<script src="js/helpers.js"></script>

<!-- Firebase modules -->
<script src="js/firebase.js"></script>
<script src="js/auth.js"></script>

<!-- Business logic modules -->
<script src="js/api.js"></script>
<script src="js/charts.js"></script>
<script src="js/mt5.js"></script>

<!-- Main app (LAST!) -->
<script src="js/app.js"></script>

<!-- SERVICE WORKER -->
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log('‚úÖ Service Worker registered'))
            .catch(err => console.warn('‚ö†Ô∏è Service Worker error:', err));
    }
</script>

<!-- INIT SCRIPT -->
<script>
    console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    window.showAboutModal = () => alert('üí∞ Gold Options Pro v2\n\n–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ–ø—Ü–∏–æ–Ω–æ–≤');
    window.showTermsModal = () => alert('üìÑ –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è');
    window.showPrivacyModal = () => alert('üîí –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏');
    window.openTelegram = () => window.open('https://t.me/ASKHAT_1985', '_blank');

    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ Firebase
    let firebaseReady = false;
    let checkCount = 0;
    const maxChecks = 100; // 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ 100ms

    const checkFirebase = setInterval(() => {
        checkCount++;
        
        console.log(`‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase (${checkCount}/${maxChecks})...`);
        
        if (typeof firebase !== 'undefined' && firebase.apps && firebase.apps.length > 0) {
            clearInterval(checkFirebase);
            firebaseReady = true;
            console.log('‚úÖ Firebase –≥–æ—Ç–æ–≤!');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('loading').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            if (window.app && typeof app.init === 'function') {
                setTimeout(() => {
                    console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è app...');
                    app.init();
                }, 100);
            }
        } else if (checkCount >= maxChecks) {
            clearInterval(checkFirebase);
            console.error('‚ùå Firebase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
            document.getElementById('loading').innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 3rem; color: #ff4444;">‚ùå</div>
                    <h2 style="color: #ff4444; margin: 20px 0;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                    <p>Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>
                    <p style="font-size: 0.9rem; color: #888;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:</p>
                    <ul style="text-align: left; display: inline-block; color: #888;">
                        <li>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</li>
                        <li>firebase-config.js –∑–∞–≥—Ä—É–∂–µ–Ω</li>
                        <li>GitHub Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã</li>
                    </ul>
                    <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #FFD700; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                        üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
                    </button>
                </div>
            `;
        }
    }, 100);
</script>

</body>
</html>

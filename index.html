<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• GOLD OPTIONS PRO v2 - Trading Terminal</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%23FFD700'>üî•</text></svg>">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/trading-data/css/base.css">
    <link rel="stylesheet" href="/trading-data/css/components/modal.css">
    <link rel="stylesheet" href="/trading-data/css/components/cards.css">
    <link rel="stylesheet" href="/trading-data/css/components/table.css">
    <link rel="stylesheet" href="/trading-data/css/pages/terminal.css">
    
    <!-- Meta -->
    <meta name="description" content="Professional Gold Options Trading Terminal">
    <meta name="theme-color" content="#050505">
</head>
<body>
    <!-- LOADING SCREEN -->
    <div id="loading" style="
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(135deg, #050505 0%, #0f0f0f 100%);
        display: flex; justify-content: center; align-items: center;
        z-index: 99999; flex-direction: column;
    ">
        <div style="
            font-size: 4rem; margin-bottom: 30px; color: #FFD700;
            animation: pulse 1s infinite;
        ">üî•</div>
        <div style="
            font-size: 2rem; color: #FFD700; font-weight: 800;
            margin-bottom: 20px; letter-spacing: 2px;
        ">GOLD OPTIONS PRO</div>
        <div style="
            font-size: 1rem; color: #888; margin-bottom: 30px;
            letter-spacing: 1px;
        ">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã...</div>
        <div style="
            width: 300px; height: 4px; background: rgba(255,215,0,0.2);
            border-radius: 2px; overflow: hidden;
        ">
            <div style="
                height: 100%; background: linear-gradient(90deg, #FFD700, #D4AF37);
                width: 30%; animation: loading 1.5s infinite;
            "></div>
        </div>
    </div>
    
    <!-- AUTH MODAL -->
    <div id="auth-modal" class="hidden" style="
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.95); backdrop-filter: blur(20px);
        display: none; /* <--- –ò–ó–ú–ï–ù–ï–ù–û –ù–ê NONE */
        justify-content: center; align-items: center;
        z-index: 9999; opacity: 0; transition: opacity 0.5s ease;
    ">
        <div class="auth-container">
            <div class="auth-header">
                <div class="auth-logo">‚ö° GOLD OPTIONS PRO</div>
                <div class="auth-subtitle">Professional Trading Terminal v2</div>
            </div>
            
            <div id="auth-error" class="auth-error"></div>
            <div id="user-info" style="display: none;"></div>
            
            <div id="auth-form-container" class="auth-form">
                <div class="form-group">
                    <label class="form-label">üìß Email –ê–¥—Ä–µ—Å</label>
                    <input type="email" id="auth-email" class="form-input" placeholder="your@email.com" autocomplete="email">
                </div>
                
                <div class="form-group">
                    <label class="form-label">üîê –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="auth-password" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="current-password">
                </div>
                
                <button id="auth-login-btn" class="auth-button" onclick="handleLogin()">üöÄ –í–û–ô–¢–ò</button>
                <button id="auth-register-btn" class="auth-button secondary" onclick="toggleAuthMode()">üìù –°–û–ó–î–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢</button>
            </div>
            
            <div id="logout-btn" style="display: none; margin-top: 10px;">
                <button class="auth-button" style="background: rgba(255,23,68,0.1); color: var(--put);" onclick="handleLogout()">
                    üëã –í–´–•–û–î
                </button>
            </div>
            
            <div class="auth-footer">
                <div style="margin-bottom: 15px;">
                    <button style="
                        background: none; border: none; color: var(--gold);
                        cursor: pointer; text-decoration: underline;
                        font-size: 0.85rem;
                    " onclick="showAboutModal()">–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</button>
                    <span style="color: #666;"> | </span>
                    <button style="
                        background: none; border: none; color: var(--gold);
                        cursor: pointer; text-decoration: underline;
                        font-size: 0.85rem;
                    " onclick="openTelegram()">üì± Telegram: @ASKHAT_1985</button>
                </div>
                <div style="font-size: 0.8rem; color: #666;">
                    ‚úÖ TRIAL: 3 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main-content" class="visible" style="display: none;">
        <!-- HEADER -->
        <header>
            <div class="logo">‚ö° GOLD OPTIONS PRO v2</div>
            <nav>
                <a href="#" class="active">–¢–ï–†–ú–ò–ù–ê–õ</a>
                <a href="#analytics">–ê–ù–ê–õ–ò–¢–ò–ö–ê</a>
                <a href="#charts">–ì–†–ê–§–ò–ö–ò</a>
            </nav>
            <div class="user-menu">
                <div class="user-badge">
                    <span>üë§</span>
                    <span id="user-email">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                </div>
                <button class="logout-btn" onclick="handleLogout()">–í–´–•–û–î</button>
            </div>
        </header>

        <!-- STATUS BAR -->
        <div class="container">
            <div class="status-bar">
                <div class="connection-status" id="connStatus">
                    <span style="color:#ff4444">üî¥ OFFLINE</span>
                </div>
                <div class="data-grid">
                    <div class="data-box">
                        <div class="data-label">–¢–ï–ö–£–©–ê–Ø –¶–ï–ù–ê</div>
                        <div class="data-value price" id="price">$2600.00</div>
                    </div>
                    <div class="data-box">
                        <div class="data-label">–í–û–õ–ê–¢–ò–õ–¨–ù–û–°–¢–¨</div>
                        <div class="data-value" id="volatility">18.50%</div>
                    </div>
                    <div class="data-box">
                        <div class="data-label">–ü–û–°–õ–ï–î–ù–ï–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï</div>
                        <div class="data-value" style="font-size: 1.2rem;" id="updated">--:--:--</div>
                    </div>
                    <div class="data-box">
                        <div class="data-label">–¢–ï–ö–£–©–ê–Ø DTE</div>
                        <div class="data-value" id="current-dte-display">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN TITLE -->
        <div class="container">
            <h1 class="main-title">üìä –û–ü–¶–ò–û–ù–ù–ê–Ø –¶–ï–ü–¨</h1>
        </div>

        <!-- CONTROLS -->
        <div class="container">
            <div class="bottom-control-panel">
                <div class="bottom-control-title">‚öôÔ∏è –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–ï–†–ú–ò–ù–ê–õ–û–ú</div>
                
                <div class="bottom-control-grid">
                    <div class="bottom-control-section">
                        <div class="bottom-control-title">üìÖ –í–´–ë–û–† –≠–ö–°–ü–ò–†–ê–¶–ò–ò</div>
                        <div class="control-row" id="dte-buttons">
                            <span style="color:#666;">Loading expirations...</span>
                        </div>
                    </div>
                    
                    <div class="bottom-control-section">
                        <div class="bottom-control-title">üìä –ö–û–õ–ò–ß–ï–°–¢–í–û –°–¢–†–ê–ô–ö–û–í</div>
                        <div class="control-row">
                            <button class="btn" data-cnt="7" onclick="App.setStrikeCount(7)">7</button>
                            <button class="btn active" data-cnt="15" onclick="App.setStrikeCount(15)">15</button>
                            <button class="btn" data-cnt="21" onclick="App.setStrikeCount(21)">21</button>
                            <button class="btn" data-cnt="31" onclick="App.setStrikeCount(31)">31</button>
                        </div>
                    </div>
                    
                    <div class="bottom-control-section">
                        <div class="bottom-control-title">üíé –û–ü–¶–ò–ò –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø</div>
                        <div class="control-row">
                            <button id="btn-prem" class="btn" onclick="App.togglePremium()">–ü–†–ï–ú–ò–ò: OFF</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-row" style="margin-top: 15px; padding: 0 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                    <div class="control-label">‚¨ÜÔ∏è FORWARD ADJ:</div>
                    <input type="number" id="forward-adj" class="inp" placeholder="0" value="0" onchange="App.applyForwardAdjustment()">
                </div>
            </div>
        </div>

        <!-- TABLE AND STATS -->
        <div class="container">
            <div class="main-table-container">
                <div class="table-wrapper">
                    <div class="table-controls">
                        <div style="color: var(--gold); font-weight: 700;" id="table-dte-label">EXPIRATION: LOADING...</div>
                    </div>
                    <div class="table-scroll">
                        <table>
                            <thead>
                                <tr>
                                    <th>CALL<br>OI</th>
                                    <th>CALL<br>VOL</th>
                                    <th>CALL<br>PREM</th>
                                    <th>DELTA</th>
                                    <th>GAMMA</th>
                                    <th>IV</th>
                                    <th>STRIKE</th>
                                    <th>IV</th>
                                    <th>GAMMA</th>
                                    <th>DELTA</th>
                                    <th>PUT<br>PREM</th>
                                    <th>PUT<br>VOL</th>
                                    <th>PUT<br>OI</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                <tr>
                                    <td colspan="13" style="text-align: center; color: #666; padding: 50px;">Loading option chain data...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="top-stats-sidebar">
                    <div class="top-stats-title">üìä TOP STATS</div>
                    <div class="top-stats-grid">
                        <div class="top-stat-box">
                            <div class="top-stat-header">
                                <div class="top-stat-name">TOP CALL OI</div>
                                <div class="top-stat-icon">üìà</div>
                            </div>
                            <div class="top-stat-list" id="top-call-oi">
                                <div style="color: #888; padding: 20px; text-align: center;">Loading...</div>
                            </div>
                        </div>
                        
                        <div class="top-stat-box">
                            <div class="top-stat-header">
                                <div class="top-stat-name">TOP PUT OI</div>
                                <div class="top-stat-icon">üìâ</div>
                            </div>
                            <div class="top-stat-list" id="top-put-oi">
                                <div style="color: #888; padding: 20px; text-align: center;">Loading...</div>
                            </div>
                        </div>
                        
                        <div class="top-stat-box">
                            <div class="top-stat-header">
                                <div class="top-stat-name">TOP CALL VOL</div>
                                <div class="top-stat-icon">üìä</div>
                            </div>
                            <div class="top-stat-list" id="top-call-vol">
                                <div style="color: #888; padding: 20px; text-align: center;">Loading...</div>
                            </div>
                        </div>
                        
                        <div class="top-stat-box">
                            <div class="top-stat-header">
                                <div class="top-stat-name">TOP PUT VOL</div>
                                <div class="top-stat-icon">üìä</div>
                            </div>
                            <div class="top-stat-list" id="top-put-vol">
                                <div style="color: #888; padding: 20px; text-align: center;">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ANALYTICS -->
        <div class="container" id="analytics">
            <h2 class="section-header">üìà –ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –†–ò–°–ö–ò</h2>
            <div class="grid-8">
                <div class="card">
                    <div class="card-header">
                        <span>üí∞</span>
                        <span>–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ë–û–õ–¨</span>
                    </div>
                    <div class="card-main-value" id="mp">$2600</div>
                    <div class="card-sub">Max Pain Level</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üìä</span>
                        <span>–û–ñ–ò–î–ê–ï–ú–û–ï –î–í–ò–ñ–ï–ù–ò–ï</span>
                    </div>
                    <div class="card-main-value" id="em">¬±$45</div>
                    <div class="card-sub" id="em-range">Range: $2555 - $2645</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üéØ</span>
                        <span>–ù–£–õ–ï–í–ê–Ø –ì–ê–ú–ú–ê</span>
                    </div>
                    <div class="card-main-value" id="zg">$2605</div>
                    <div class="card-sub" id="zg-pos">‚Üë +5.0</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üåä</span>
                        <span>–í–ê–ù–ù–ê</span>
                    </div>
                    <div class="card-main-value" id="vanna">0.12</div>
                    <div class="card-sub">Vanna Greeks</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>‚è∞</span>
                        <span>CHARM</span>
                    </div>
                    <div class="card-main-value" id="charm">0.0045</div>
                    <div class="card-sub">Time Decay</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üé®</span>
                        <span>COLOR</span>
                    </div>
                    <div class="card-main-value" id="color">-0.08</div>
                    <div class="card-sub">Gamma Decay</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üìà</span>
                        <span>PROB CALL ITM</span>
                    </div>
                    <div class="card-main-value" id="prob-c" style="color: var(--call);">45.2%</div>
                    <div class="card-sub">Probability</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>üìâ</span>
                        <span>PROB PUT ITM</span>
                    </div>
                    <div class="card-main-value" id="prob-p" style="color: var(--put);">54.8%</div>
                    <div class="card-sub">Probability</div>
                </div>
            </div>
        </div>

        <!-- BREAKEVENS -->
        <div class="container">
            <h2 class="section-header">üîì TOP 10 –ë–ï–ó–£–ë–´–¢–ö–û–í</h2>
            <div class="grid-8" id="top-breakevens">
                <div style="grid-column: 1/-1; text-align: center; color: #888; padding: 30px;">
                    Loading breakeven data...
                </div>
            </div>
        </div>

        <!-- CHARTS -->
        <div class="container" id="charts">
            <h2 class="section-header">üìä –ê–ù–ê–õ–ò–¢–ò–ß–ï–°–ö–ò–ï –ì–†–ê–§–ò–ö–ò</h2>
            <div class="chart-grid-8">
                <div class="chart-container">
                    <div class="chart-title">OI DISTRIBUTION</div>
                    <canvas id="chart-oi"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">VOLUME HEATMAP</div>
                    <canvas id="chart-vol"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">IV SMILE</div>
                    <canvas id="chart-iv"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">MAX PAIN</div>
                    <canvas id="chart-mp"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">GAMMA EXPOSURE</div>
                    <canvas id="chart-gamma"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">DELTA PROFILE</div>
                    <canvas id="chart-delta"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">GEX PROFILE</div>
                    <canvas id="chart-gex"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">THETA DECAY</div>
                    <canvas id="chart-theta"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- FIREBASE SDK (COMPAT VERSION - –ë–ï–ó –ú–û–î–£–õ–ï–ô!) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>

    <!-- CHART.JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- üî• FIREBASE CONFIG - –ó–ê–ì–†–£–ñ–ê–ï–¢–°–Ø –°–ò–ù–•–†–û–ù–ù–û -->
    <script>
        console.log('üì• –ó–∞–≥—Ä—É–∑–∫–∞ firebase-config.js...');
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º IIFE –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
        (function() {
            const timestamp = Date.now();
            const script = document.createElement('script');
            
            // üëá –ò–°–ü–†–ê–í–õ–ï–ù–û –ó–î–ï–°–¨:
            // –ë—ã–ª–æ: "trading-data/firebase-config.js?..." (—Å–æ–∑–¥–∞–≤–∞–ª–æ –¥—É–±–ª—å –ø–∞–ø–∫–∏)
            // –°—Ç–∞–ª–æ: "/trading-data/firebase-config.js?..." (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Å–∞–π—Ç–∞)
            
            script.src = "/trading-data/firebase-config.js?nocache=" + timestamp; 
            
            script.async = false;
            
            script.onload = () => {
                console.log('‚úÖ firebase-config.js –∑–∞–≥—Ä—É–∂–µ–Ω');
            };
            
            script.onerror = () => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ firebase-config.js. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ª–µ–∂–∏—Ç –ª–∏ —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è!');
                if (typeof showConfigError === 'function') showConfigError();
            };
            
            document.head.appendChild(script);
        })();
    </script>

    <!-- CONSTANTS -->
    <script src="/trading-data/js/constants.js"></script>
    
    <!-- SERVICES -->
    <script src="/trading-data/js/services/cache.js"></script>
    <script src="/trading-data/js/utils/helpers.js"></script>
    
    <!-- MODULES -->
    <script src="/trading-data/js/modules/firebase.js"></script>
    <script src="/trading-data/js/modules/auth.js"></script>
    <script src="/trading-data/js/services/api.js"></script>
    <script src="/trading-data/js/modules/charts.js"></script>
    <script src="/trading-data/js/app.js"></script>

    <!-- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø -->
    <script>
        console.log('üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø...');
        
        // –ñ–¥—ë–º –∫–æ–Ω—Ñ–∏–≥–∞ Firebase
        let attempts = 0;
        const waitForConfig = setInterval(() => {
            if (window.firebaseConfig && window.firebaseConfig.projectId) {
                clearInterval(waitForConfig);
                console.log('‚úÖ Firebase –∫–æ–Ω—Ñ–∏–≥ –≥–æ—Ç–æ–≤!');
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Auth
                if (window.AuthModule) {
                    AuthModule.autoInit();
                } else {
                    console.error('‚ùå AuthModule –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }
            } else if (attempts > 100) {
                clearInterval(waitForConfig);
                console.error('‚ùå Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–Ω—Ñ–∏–≥–∞');
                showConfigError();
            }
            attempts++;
        }, 50);
        
        function showConfigError() {
            const loading = document.getElementById('loading');
            if (loading) {
                loading.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 4rem; margin-bottom: 20px; color: #FF1744;">‚ùå</div>
                        <div style="color: #FF1744; font-size: 1.5rem; font-weight: 800; margin-bottom: 20px;">
                            –û–®–ò–ë–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
                        </div>
                        <div style="color: #888; font-size: 1rem; margin-bottom: 30px; max-width: 400px;">
                            –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å firebase-config.js<br>
                            –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
                        </div>
                        <button onclick="location.reload()" style="
                            background: var(--gold); color: #000;
                            border: none; padding: 12px 30px; border-radius: 8px;
                            font-weight: 700; cursor: pointer; font-size: 1rem;
                        ">üîÑ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ò–¢–¨</button>
                    </div>
                `;
            }
        }
    </script>

    <!-- SERVICE WORKER -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/trading-data/service-worker.js')
                .then(reg => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
                .catch(err => console.warn('‚ö†Ô∏è Service Worker –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:', err));
        }
    </script>

    <!-- GLOBAL ANIMATIONS -->
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300%); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</body>
</html>
